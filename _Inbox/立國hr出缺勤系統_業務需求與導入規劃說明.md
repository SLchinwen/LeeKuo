# HR 出缺勤系統（人臉／指紋辨識）
## 業務需求描述 × 導入前依賴 × SOP 規劃說明（更新版）

---

## 1. 文件定位與目的

本文件為「**業務段需求文件（Business Requirements）**」，用以說明立國工程導入 HR 出缺勤系統之**制度需求、治理原則、導入前依賴條件與營運 SOP**，作為後續 PRD、系統設計、操作手冊與驗收文件的上游依據。

- 文件性質：可歸檔、可長期維護之正式內部文件
- 適用對象：管理層、HR、人資行政、IT、系統開發團隊
- 預設可見性：內部（internal）

---

## 2. 專案背景與核心目標

### 2.1 導入背景

立國工程現場與內勤人力混合運作，存在以下實務狀況：

- 多據點、多設備（人臉 / 指紋）刷卡資料分散
- 人臉辨識短時間反覆讀取造成資料雜訊
- 部分場地僅單一設備，無法明確區分進出
- 設備故障時高度仰賴人工補登
- 月底集中補單，易產生爭議與稽核風險

### 2.2 專案核心目標

- 建立 **可稽核、可追溯、可重算** 的出缺勤制度
- 將制度判斷前移到系統，降低月底人工作業
- 清楚區分：
  - 事實層（刷卡 / 辨識 Log）
  - 判斷層（出勤結果）
  - 人工介入層（請假 / 加班 / 點名）

---

## 3. 專案範圍界定

### 3.1 本階段包含

- 判斷並產出：
  - 上班日 / 假日
  - 上班時間 / 下班時間
  - 上班工時
  - 加班工時（依資格）
- 支援：
  - 人臉 / 指紋辨識
  - 多設備、多地點
  - 單一設備進出共用
- 建立：
  - 出勤異常提示
  - 員工補單流程
  - HR 月結算制度
  - **點名系統作為出勤輔助與核對來源**

### 3.2 明確不包含

- 薪資計算與發放（僅作為下游系統）

---

## 4. 制度與資料治理核心原則

### 4.1 三層資料模型

1. **事實層（不可變）**：
   - 人臉 / 指紋刷卡紀錄（Raw Log）
2. **判斷層（可重算）**：
   - 系統計算後之出勤結果
3. **人工介入層（需核准）**：
   - 請假、補休、加班、人工點名

> 所有人工修正僅能影響判斷層，不可回寫原始 Log。

---

## 5. 導入前依賴資料（業務面）

### 5.1 員工與狀態資料

- 員工編號（唯一、不可變）
- 所屬部門 / 支援部門
- 到職日 / 在職狀態
- **離職日（若有）**
- 是否需刷卡
- 是否可加班
- 對應人臉 / 指紋辨識 ID（可多筆）

#### 離職員工治理原則（新增）

- 員工狀態為「離職」後：
  - 不再比對刷卡資料
  - 不產生出勤、加班、異常判斷
  - 原有歷史資料僅供查詢與稽核

---

### 5.2 班別、行事曆與跨班規則

- 班別：
  - 上班 / 下班時間
  - 應出勤工時
- 公司行事曆：
  - 工作日、例假日、國定假日
- **跨班留宿政策（新增）**：
  - 由現場點名系統標示跨班 / 留宿名單
  - 作為刷卡與到班判斷之輔助依據

---

### 5.3 設備與點名依賴

- 刷卡 / 辨識設備：
  - device_id、location
  - 是否進出共用
- **點名系統（新增定位）**：
  - 作為設備異常時之替代來源
  - 作為跨班、支援人力之核對依據
  - 作為後續「支援人力歸屬成本分攤」的基礎資料來源

---

## 6. 系統自動與人工程序（業務規則摘要）

### 6.1 日常自動程序

- 匯入刷卡 / 辨識 Log
- 去除短時間重複讀取
- 判斷上下班時間（第一筆 / 最後一筆）
- 計算工時與加班時數
- 標示異常待處理

### 6.2 點名輔助與設備異常處理（新增）

- 刷卡機故障或卡機異常導致大量刷卡資料缺失時：
  - 啟用點名作業
  - 勾選到班 / 請假 / 未到名單
  - **可批次補入出缺勤與加班資料**
- 點名資料定位：
  - 不覆蓋刷卡 Log
  - 作為判斷層之佐證與補齊來源

---

## 7. 人工 SOP 規劃（業務面）

### SOP-1：新進員工
1. 建立員工主檔
2. 綁定人臉 / 指紋 ID
3. 設定是否可加班
4. 測試辨識或點名一次

### SOP-2：離職員工（新增）
1. HR 登錄離職日
2. 系統自離職日起：
   - 停止出勤與刷卡比對
   - 不再產生異常與補單需求
3. 歷史資料封存供查詢

### SOP-3：每日異常（員工 / 現場）
- 員工可每日登入系統查詢個人出勤狀態與刷卡異常
- 系統每日自動檢查前一日出勤資料，若發現「無刷卡資料」：
  - 發送一次異常通知給員工
  - 提示需補請假、補刷卡或由點名佐證
- 員工或現場人員可依異常類型進行補登或說明

### SOP-4：設備故障 / 大量異常（HR / 現場）（新增）
1. 啟用點名模式
2. 勾選到班 / 請假名單
3. 批次補入出缺勤與加班
4. 留存異常原因與核准紀錄

### SOP-5：月結算（HR）
1. 關閉補單期限
2. 執行月結算
3. 系統自動寫入：
   - 曠職（AB）
   - 遲到（LT）/ 早退（ET）
4. 封存結果供薪資系統讀取

---

## 8. 尚待釐清與需補充之情境檢核（Gap Analysis）

以下為目前制度下**仍需在後續 PRD 或制度會議中確認的情境**，避免在實作或勞檢時出現灰色地帶：

### 8.1 工時與班別特殊情境
- 夜班或跨日班（例：22:00–06:00）之工時計算與假日歸屬
- 跨日刷卡但未跨班別之情境判定（是否切日或切班）
- 同日多班別（拆班）是否允許與其計算方式

### 8.2 加班邊界與員工身分
- 不可加班人員若因緊急狀況實際工作之補償方式
- 管理職 / 責任制人員是否納入本系統之加班稽核
- 支援人力跨部門支援時，其加班歸屬與責任部門認定

### 8.3 點名與刷卡衝突情境
- 點名顯示到班，但刷卡完全缺失之最終採信原則
- 刷卡顯示在場，但點名顯示未到之處理方式
- 點名與刷卡皆存在，但時間落差過大之例外判斷

### 8.4 通知與補單期限
- 員工每日異常通知後，最晚可補單之期限
- 月結算後是否允許追溯修正，以及責任歸屬

---

## 9. 勞基法合規稽核與加班調整機制（新增章節）

> 本章節目的在於：**於出缺勤資料進入薪資計算前，完成法規稽核與制度性調整，確保不影響勞工依法應得之加班時數與報酬。**

### 9.1 法規稽核時點定位

- 稽核時點：
  - 出缺勤資料「已結算、未送薪資系統」之前
- 稽核對象：
  - 每日加班時數
  - 每月加班總時數
  - 假日 / 休息日 / 例假日加班

---

### 9.2 勞基法加班與假日加班原則（摘要）

- 平日加班：
  - 每日原則不超過 4 小時
- 休息日加班：
  - 依實際工時分段計算
- 例假日加班：
  - 原則禁止，僅於法定例外情況
- 每月加班上限：
  - 依勞基法及公司核備規範

> 實際數值與級距以公司最新勞基法設定檔為準（由 HR 維護）。

---

### 9.3 系統稽核與調整原則

- 系統**不得刪減或調降**勞工依法應得之加班時數
- 所有依法應給付之加班時數：
  - 必須完整進入「薪資計算用加班時數」

---

### 9.4 超過法定上限之處理設計（制度補償）

當實際工作時數超過法定可列入加班薪資之上限時：

- 系統處理方式：
  1. 法定範圍內之加班：
     - 依勞基法規定列入加班薪資計算
  2. 超過法定上限之工作時數：
     - 不列入加班薪資
     - 轉換為「加班工作點數」或「工作獎金基礎量」

- 發放方式：
  - 以獎金、績效獎勵或專案工作獎金方式發放
  - 與薪資結構分離，不影響加班費合規性

---

### 9.5 稽核紀錄與查核支援

- 系統需保留：
  - 原始實際工作時數
  - 法定可計薪加班時數
  - 超額轉換之點數 / 獎金時數
- 供：
  - 勞檢單位查核
  - 內部稽核與制度說明

---

## 10. 成功導入判斷標準（業務面）

- 出缺勤資料在進入薪資前已完成法規稽核
- 無因制度調整而減損員工依法應得加班報酬
- 超時工作以制度化獎勵方式補償，符合法規精神
- 勞檢可清楚說明工時、加班、補償三者關係

---

## 11. 下一步建議

- 進入 **C1｜需求展開拆解（Requirement Decomposition）**
- 將：
  - 法規稽核模組
  - 加班轉換點數 / 獎金規則
  - 點名與刷卡衝突判斷
  納入正式需求拆解

> 本文件已作為後續 PRD 與系統設計之業務母文件。
