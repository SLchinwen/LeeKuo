# 程式編碼原則｜共用規範

- **版本：** v1.0（立國專案引用）
- **日期：** 2026-02-26
- **說明：** 本文件為**跨專案、跨模組**共用之程式編碼原則；立國專案引用並套用，模組代號見 §12。

本文件適用於報關管理、立國專案及其他採用本規範之專案。各專案／模組依此規範訂定**模組代號**與**百位數對應**，並產出權限表用主程式清單；子編碼由程式設計師依本規範編列。

---

## 1. 目的與適用範圍

- **目的**：統一程式代號結構與權限表編列方式，便於授權管理、跨專案查找與溝通。
- **適用範圍**：所有採用本規範之專案與模組；各專案／模組須選定**模組代號**與**主作業分類**後，依下列原則編列主程式與子編碼。

---

## 2. 代號結構

| 組成 | 說明 | 範例 |
| --- | --- | --- |
| **模組代號** | **三～五碼**英文縮寫，由**系統名稱或主功能**之英文單字首組成；同一專案／模組內不重複 | `CUS`（報關）、`MCR`（維護合約回報）、`HR`（出缺勤）等，由各專案訂定 |
| **功能代號** | 三位數，百位數對應主作業類別，十位個位對應功能類型 | `110`、`120` |
| **完整主程式代號** | `<模組代號><功能代號>`，用於**使用者授權權限表** | `CUS110`、`MCR210`、`HR100` |

---

## 3. 權限表主程式原則（每作業四支）

**僅下列四類**編列為主程式代號，登錄於使用者授權之權限表；對應選單／功能入口，供權限控管使用。

| 十位個位 | 功能類型 | 說明 |
| --- | --- | --- |
| **x00** | 作業目錄 | 該類作業入口／選單 |
| **x10** | 案件建檔 | 案件新增與維護；其內流程步驟為**子作業**，不另編主程式代號 |
| **x20** | 案件查詢（含增修） | 案件查詢與增刪修；若有匯出、統計需求，以子編碼延伸 |
| **x30** | 案件歷史歸檔 | 歷史歸檔與歷史資料查詢 |

- 每一**主作業**（由專案定義）對應一組百位數，並編列上述四支主程式（x00、x10、x20、x30）。
- **匯出、統計**等為程式延伸，不納入權限表主程式，以**子編碼**編列。

---

## 4. 子編碼原則（不納入權限表）

下列項目**不**給予獨立主程式代號，由**程式設計師**依團隊規則以**子編碼**編列，不列入使用者授權權限表。

### 4.1 建檔內子作業

- 編碼方式：`<主程式代號>_<識別>`，例：`MCR110_Order`、`MCR110_Report01`。
- 識別命名由程式設計師依專案慣例訂定（英文簡稱、序號等）。

### 4.2 報表、開窗、查詢子畫面

- 編碼方式：`<主程式代號>_<識別>`，例：`MCR110_Report01`、`MCR120_Query01`。

### 4.3 匯出、統計（程式延伸）

- 編碼方式：`<主程式代號>_<識別>`，例：`MCR120_Export01`、`MCR120_Report01`。

### 4.4 批次程式（不掛選單）

- **對應主程式**：依該主程式代號編列子程式。
- **編碼方式**：`<主程式代號>_batch_<功能>`，例：`MCR110_batch_update`、`MCR110_batch_verify`。
- **無對應主程式**：可採獨立編碼（如 `BATCH001`、`SYS_Batch_DailyExport`），由專案訂定。

### 4.5 子程式識別命名慣例

- **識別字元**：建議用英文字母、數字、底線；避免特殊字元。
- **大小寫**：建議統一採**小寫**，例：`MCR110_doc_audit`、`MCR110_report01`；`_batch_` 固定小寫。

### 4.6 全域批次編號規則

- **格式**：`BATCH`＋三位數，或 `SYS_Batch_`＋功能英文；由專案於架構文件訂定。
- **編號**：`BATCH001`～`BATCH999` 依新增順序遞增；作廢保留編號，不重複使用。

### 4.7 編列權責

- **主程式代號**（權限表用）：由**需求方／專案**訂定，寫入各專案之「模組與程式代號架構」文件。
- **子編碼**（含批次）：由**程式設計師**依本規範與團隊規則編列，不列入權限表清單。

---

## 5. 系統人員專用程式編碼原則（SYS）

**適用**：供**系統人員**使用之程式（如表單組態維護、參數設定、主檔維護等），與一般業務承辦使用之主程式區隔。

| 組成 | 說明 | 範例 |
| --- | --- | --- |
| **模組代號** | 與主程式相同 | `MCR`、`HR` |
| **SYS 標識** | 固定字串，表示「系統設定／系統人員專用」 | `SYS` |
| **三位數** | 依新增順序編列，010、020、030… | `010` |
| **完整代號** | `<模組代號>SYS<三位數>`，用於權限表 | `MCRSYS010`、`HRSYS010` |

**權限**：僅授權予**系統管理者**或**系統人員**角色；一般承辦選單不顯示。

---

## 6. API 與 TABLE 命名對應

### 6.1 API 命名

- **對應**：API 路徑或端點名稱建議與程式代號對應，便於追溯。
- **格式**：由專案訂定；範例：`/api/<模組小寫>/<主程式>/<動作>`，如 `/api/mcr/110/cases`、`/api/mcr/120/query`。

### 6.2 TABLE／資料庫命名

- **對應**：資料表命名建議與模組、主程式或業務實體對應。
- **格式**：由專案訂定；範例：`<模組小寫>_<實體>`，如 `mcr_export_master`、`mcr110_cases`。
- **欄位**：依模組欄位名稱對照表之中英文對照命名。

---

## 7. 各專案／模組之百位數規劃

- **百位數**由各專案／模組自訂，對應該專案之**主作業分類**。
- 同一專案內，同一功能的十位個位意義需一致（x00 皆為目錄、x10 皆為建檔、x20 皆為查詢含增修、x30 皆為歷史歸檔）。
- 新增主作業時，以未使用之百位數遞增編列。

---

## 8. 使用原則（共通）

- 同一專案／模組必須使用同一**模組代號**。
- 權限表僅登錄**主程式代號**（x00、x10、x20、x30）；子作業與附屬功能不登錄。
- 文件、雛型、程式命名與程式代號保持一致；雛型 HTML 檔名建議：`YYYY-MM-DD_prototype_<程式代號>.html`。
- 作廢／刪除規則：若對外有編號，建議採作廢保留編號、系統單號重取，避免空號。

---

## 9. 專案套用方式

1. **選定模組代號**：依系統名稱或主功能之英文單字首組成，**三～五碼**。
2. **訂定主作業分類與百位數**：列出該模組之所有主作業，並分配百位數（1xx、2xx、3xx…）。
3. **產出主程式代號清單**：每一主作業編列四支主程式（目錄、建檔、查詢含增修、歷史歸檔），寫入該專案之架構或 PRD 文件。
4. **權限表**：僅登錄上述主程式代號。
5. **子編碼**：由程式設計師於開發時依本規範 §4 編列，並於專案內紀錄。
6. **API／TABLE**：依本規範 §6 或專案技術規格訂定命名對應。

---

## 10. 模組代號命名指引

| 項目 | 說明 |
| --- | --- |
| **長度** | 三～五碼（3～5 個英文字母） |
| **組成** | 由**系統名稱**或**主功能**之英文單字首組成 |
| **範例** | 報關 Customs → `CUS`；維護合約回報 Maintenance Contract Reporting → `MCR`；出缺勤 Human Resources / Attendance → `HR` |
| **注意** | 同一專案／模組內不重複；避免與常見縮寫衝突 |

---

## 11. 範例摘要（報關管理模組，參考用）

| 項目 | 內容 |
| --- | --- |
| 模組代號 | `CUS`（Customs 報關，3 碼） |
| 主程式範例 | CUS100 目錄、CUS110 建檔、CUS120 查詢（含增修）、CUS130 歷史歸檔 |
| 系統人員程式 | CUSSYS010 表單組態維護 |
| 子編碼範例 | CUS110_Order、CUS110_Report01；CUS110_batch_update、CUS110_batch_verify |

不同專案依同原則訂定**模組代號**與**百位數對應**後，套用 §3 之主程式結構即可。

---

## 12. 本專案（立國）套用說明

| 項目 | 說明 |
| --- | --- |
| **MCR 模組** | 維護合約回報（Maintenance Contract Reporting）；主程式代號如 MCR100、MCR110、MCR210、MCR220 等，依既有 PRD 與規格草案為準。 |
| **HR 模組** | 出缺勤系統；模組代號 `HR`，主程式代號與百位數規劃依需求展開後訂定。 |
| **PRD／規格** | 主程式清單與權限矩陣見 `03_Solution/` 下 PRD、工程規格草案；欄位對照見表單與名詞對照清單。 |

雛型檔名建議：`YYYY-MM-DD_prototype_<程式代號>.html`（例：`2026-02-26_prototype_MCR210.html`）。

---

## 13. 版本紀錄

| 版本 | 日期 | 修改內容 |
| --- | --- | --- |
| v1.0 | 2026-02-26 | 自 HER_CHYUN 程式編碼原則_共用規範複製並調整為立國專案引用版；新增 §12 本專案（立國）套用說明（MCR、HR 模組代號）；範例改為 MCR/HR 適用 |
