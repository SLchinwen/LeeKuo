# 表單與名詞對照清單｜欄位引用標準

- **日期：** 2026-01-30
- **版本：** v1.0
- **用途：** 表單／API／資料表欄位對齊檢核、名詞與用途說明、未來引用標準
- **對應規格：** `03_Solution/工程規格草案_MCR_第二階段.md`

---

## 一、表單清單（依模組）

### 1.1 回報與審核

| 表單／資料表 | 用途 | 出現位置 | 備註 |
| ------------ | ---- | -------- | ---- |
| equipment_process_report | 工序回報主檔（單筆設備×工序之回報狀態與審核） | 規格 §2.1、API `/reports` | 回報／提交／退回／核定 |
| 回報清單畫面 | 現場回報、工序層級列表 | PRD §5.1、UI | 僅顯示 need_report=是 之工序 |
| 審核畫面（含退回） | 監工核定或退回、填寫退回原因 | PRD §5.3、API `/reports/{id}/return`、`/approve` | 退回需原因 |

### 1.2 照片

| 表單／資料表 | 用途 | 出現位置 | 備註 |
| ------------ | ---- | -------- | ---- |
| equipment_photo | 回報關聯照片（Current/History） | 規格 §2.2、API `/reports/{id}/photos` | 新圖 Current、舊圖 History |
| 拍照/照片管理畫面 | 補拍、換圖、歷史查詢 | PRD §5.2 | need_photo=是 時顯示 |

### 1.3 完工與請款

| 表單／資料表 | 用途 | 出現位置 | 備註 |
| ------------ | ---- | -------- | ---- |
| completion_report | 設備完工回報（可請款通知、可重開） | 規格 §2.3、API `/completion-reports` | 關帳前可重開修改 |
| billing_snapshot | 請款/關帳週期與條件快照 | 規格 §2.4、API `/billing/exports`、`/billing/close` | 關帳後鎖定 |
| 文件產出畫面 | 依條件產出 Excel/Word | PRD §5.4 | 篩選條件需記錄 |

### 1.4 吊車儀表板與派工

| 表單／資料表／畫面 | 用途 | 出現位置 | 備註 |
| ------------------ | ---- | -------- | ---- |
| crane_assignment | 吊車派工（停駐點+噸數+入場日期） | 規格 §7.3、API `/crane/assignments` | 含建立當下快照 |
| 停駐區（效益查詢） | KPI＋停駐點表格、點數字看設備清單 | 吊車儀錶板.html | 可吊卸/排吊卸 ≤60/>60 |
| 已派工區 | 派工列表、列印進場表、刪除 | 吊車儀錶板.html、API `/crane/assignments` | 編號、入場日期、停駐點、噸數、廠商、快照、備註 |
| 預定派車表單（Modal） | 建立單筆派工 | 吊車儀錶板.html、POST `/crane/assignments` | 停駐點、入場日期、噸數、廠商、備註 |
| 設備清單（Modal） | 點數字後顯示設備＋目前工序＋工序數＋需求噸數 | 吊車儀錶板.html、GET `/crane/dashboard` 或明細 | 可吊卸/排吊卸明細 |
| 吊車派工單（列印） | 現場趕工用、可吊掛只統計、排吊卸列明細＋吊掛前未完成工序 | 吊車儀錶板.html、GET `/crane/assignments/{id}` | 進場表 |

---

## 二、名詞對照與用途說明

### 2.1 狀態名詞（回報／照片／關帳）

| 中文（建議 UI 顯示） | 英文（API/DB 建議值） | 用途／說明 |
| -------------------- | -------------------- | ---------- |
| 草稿 | Draft | 回報尚未提交 |
| 已回報 | Reported | 回報已提交，待審核 |
| 已退回 | Returned | 審核退回，可補件重報 |
| 已核定 | Approved | 審核通過 |
| 不需照片 | NotRequired | 該工序不需拍照 |
| 待補照片 | Pending | 需拍照但尚未完成（可核定/請款） |
| 已完成照片 | Completed | 照片已上傳 |
| 現行版 | Current | 照片版本：當前使用 |
| 歷史版 | History | 照片版本：已替換之舊圖 |
| 關帳中／未關帳 | Open | 請款週期可變更 |
| 已關帳 | Closed | 請款關帳後不可更正 |

### 2.2 吊車專用名詞

| 中文（建議 UI 顯示） | 英文／代碼（API/DB） | 用途／說明 |
| -------------------- | -------------------- | ---------- |
| 可吊卸 | ok（或 ready） | 現在就能吊，工序/資料已就緒 |
| 排吊卸 | plan（或 expected） | 等前面工序做完再吊 |
| 停駐點 | stand | 停駐區代號，如 A / B / C（不用 P-01 等） |
| 入場日期 | entry_date | 吊車預定入場日 |
| 吊車噸數／需求噸數 | ton / crane_tonnage | 噸數，分級 ≤60 / >60 |
| 60噸以下 | le60（或 ≤60） | 數量/統計用 |
| 60噸以上 | gt60（或 >60） | 數量/統計用 |
| 建立當下快照 | snapshot | 建立派工時之可吊卸/排吊卸數量（okLe60, okGt60, planLe60, planGt60） |
| 吊掛前未完成工序 | preLiftTodoSteps | 排吊卸設備之待辦工序清單（列印派工單用） |
| 預定派車／已派工 | assignment | 一筆派工紀錄 |

### 2.3 工序／主檔欄位（與吊車彙總、回報共用）

| 中文 | 英文（API/DB） | 用途／說明 |
| ---- | -------------- | ---------- |
| 是否需回報 | need_report | 否→不出現在回報清單 |
| 是否需拍照 | need_photo | 否→不擋回報；是→回報完成可為 Pending |
| 吊車噸數 | crane_tonnage | 工序需求噸數，吊車彙總用；由主檔維護，回報端只讀 |
| 停駐點區域群組 | parking_zone_group | 工序所屬停駐點（如 A/B/C），吊車彙總用；由主檔維護，回報端只讀 |
| 設備編號 | equipment_id / eq | 設備識別 |
| 工序／過程 | process_id | 工序識別 |
| 目前工序 | step | 設備目前工序名稱（吊車設備清單用） |
| 工序數 | stepCount | 工序數量（吊車設備清單用） |

---

## 三、欄位引用標準（表單／API／DB 對齊用）

### 3.1 回報模組

| 標準欄位名（建議 API/DB） | 中文說明 | 表單/API 引用時 |
| ------------------------- | -------- | --------------- |
| id | 主鍵 | 各表統一 |
| equipment_id | 設備 ID | equipment_process_report, completion_report |
| process_id | 工序 ID | equipment_process_report |
| report_status | Draft/Reported/Returned/Approved | equipment_process_report |
| photo_status | NotRequired/Pending/Completed | equipment_process_report |
| reported_by, reported_at | 回報人、回報時間 | equipment_process_report |
| approved_by, approved_at | 核定人、核定時間 | equipment_process_report |
| return_reason | 退回原因（必填當退回時） | equipment_process_report |

### 3.2 照片模組

| 標準欄位名 | 中文說明 | 表單/API 引用時 |
| ---------- | -------- | --------------- |
| report_id | 關聯回報 ID | equipment_photo |
| file_url | 檔案路徑/URL | equipment_photo |
| version | Current/History | equipment_photo |
| uploaded_by, uploaded_at | 上傳人、上傳時間 | equipment_photo |

### 3.3 完工與請款模組

| 標準欄位名 | 中文說明 | 表單/API 引用時 |
| ---------- | -------- | --------------- |
| completed_flag | 完工標記 | completion_report |
| completed_by, completed_at | 完工回報人、時間 | completion_report |
| reopen_reason, reopen_at | 重開原因、重開時間 | completion_report |
| period | 請款週期 | billing_snapshot |
| filter_conditions | 篩選條件（JSON） | billing_snapshot |
| status | Open/Closed | billing_snapshot |

### 3.4 吊車模組

| 標準欄位名 | 中文說明 | 表單/API 引用時 |
| ---------- | -------- | --------------- |
| stand | 停駐點（A/B/C） | crane_assignment、儀表板、預定派車表單 |
| entry_date | 入場日期 | crane_assignment、已派工區、預定派車表單 |
| ton | 吊車噸數 | crane_assignment、已派工區、預定派車表單、列印 |
| vendor_id | 廠商 ID | crane_assignment、預定派車表單、列印（廠商名稱另查） |
| note | 備註（選填） | crane_assignment、已派工區、預定派車表單 |
| snapshot | 快照 JSON：okLe60, okGt60, planLe60, planGt60 | crane_assignment、已派工區、列印說明 |
| created_by, created_at | 建立人、建立時間 | crane_assignment |

### 3.5 吊車儀表板彙總（查詢用，非儲存表）

| 標準欄位名／鍵 | 中文說明 | 用途 |
| -------------- | -------- | ---- |
| stand | 停駐點 | 表格列、KPI 彙總 |
| okLe60, okGt60 | 可吊卸 ≤60 / >60 數量 | 表格、KPI、快照 |
| planLe60, planGt60 | 排吊卸 ≤60 / >60 數量 | 表格、KPI、快照 |
| eq, step, stepCount, ton, statusText | 設備編號、目前工序、工序數、需求噸數、狀態說明 | 設備清單 Modal、列印排吊卸明細 |
| preLiftTodoSteps | 吊掛前未完成工序（陣列） | 列印派工單排吊卸區 |

---

## 四、未來檢核與建議

### 4.1 檢核清單（新增/修改表單或 API 時）

- [ ] **命名**：欄位是否依本清單「標準欄位名」命名？若有新增，是否補進本清單？
- [ ] **狀態值**：回報/照片/關帳狀態是否僅使用「二、名詞對照」所列英文值？
- [ ] **吊車用語**：UI 是否統一使用「可吊卸／排吊卸」「≤60／>60」「停駐點」等中文，不對外暴露英文代碼？
- [ ] **必填**：退回是否強制填寫原因（return_reason）？派工之 stand / entry_date / ton / vendor_id 是否必填？
- [ ] **只讀**：crane_tonnage、parking_zone_group 在回報端是否為只讀（由主檔維護）？
- [ ] **關帳**：關帳後是否禁止任何變更（含回報、照片、完工、請款）？

### 4.2 對齊建議

1. **API 與 DB**：REST 請求/回應欄位名稱建議與「三、欄位引用標準」一致，必要時在 API 文件註明對應 DB 欄位。
2. **UI 與 API**：表單送出時，欄位 key 與 API 約定一致（如 stand、entry_date、ton、vendor_id、note）；顯示用中文依「二、名詞對照」。
3. **吊車與回報**：儀表板彙總資料來源為「每日報工＋停駐點主檔」，工序欄位 crane_tonnage、parking_zone_group 與回報/照片狀態分線，避免混淆。
4. **列印與資料**：吊車派工單之「可吊掛只統計、排吊卸列明細＋preLiftTodoSteps」需由後端或前端能取得相同結構（eq, step, ton, preLiftTodoSteps, note）。

### 4.3 版本與維護

- 本清單版本隨「工程規格草案_MCR_第二階段」或表單/API 重大變更時更新。
- 新增資料表或 API 端點時，請同步更新「一、表單清單」與「三、欄位引用標準」。
- 新增狀態值或業務名詞時，請同步更新「二、名詞對照與用途說明」。

---

## 五、文件對照索引

| 文件 | 內容概要 |
| ---- | -------- |
| 工程規格草案_MCR_第二階段.md | 狀態機、資料表、API、權限、吊車草案 |
| PRD_立國工程_MCR_第二階段.md | 產品目標、角色、流程、功能模組、驗收 |
| 吊車排程系統_模擬畫面修改彙總說明.md | 吊車 UI 設計理由與修改重點 |
| 吊車儀錶板.html | 吊車儀表板與派工 Demo 畫面與欄位 |
