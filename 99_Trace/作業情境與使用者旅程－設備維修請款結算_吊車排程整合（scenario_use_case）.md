<!-- Generated by Prompt: scenario-usecase.md -->
<!-- Stage: 10-business -->
<!-- Date: 2026-01-29 -->
---
title: "作業情境與使用者旅程－設備維修請款結算×吊車排程整合"
date: "2026-01-29"

# 治理與歸屬
organization: "client-project"
client: "立國工程股份有限公司"
project: "MaintCloud Report（MCR）"
module: "設備維修請款結算模組"

# 文件屬性
category: "operations"
type: "Scenario"

# 生命週期
status: "Draft"
approval_status: "internal"
needs_review: true
confidence: 0.75

# 發布控制
visibility: "internal"
publish_target: "none"

# 來源追溯
origin: "ai-generated"
authoring_mode: "assistant"
prompt_id: "scenario-usecase"
prompt_stage: "10-business"
generation_mode: "prompt-driven"
---

# 作業情境與使用者旅程－設備維修請款結算×吊車排程整合（Scenario / Use Case）

> ⚠️ 本文件屬於內部作業情境文件，預設不可對外公開。

---

## 1. 文件目的與使用方式

### 1.1 目的

* 將「簽約 → 單價治理 → 現場回報/拍照 → 追加項目 → 監工核定 → 試算請款 → 關帳 → 送出報表」的主線流程，用可被討論與驗證的情境描述固定下來。
* 明確定義每個角色在每個節點的責任、輸入/輸出資料，以及與吊車排程的交互邏輯。
* 作為後續「Solution Proposal / Requirement Decomposition / PRD」的唯一情境基礎，避免後段文件偏離會議共識。

### 1.2 讀者

* 業務（簽約與單價維護）
* 專案經理（設備工作項目對應、追加項目、試算請款）
* 現場人員（回報與拍照）
* 監工/維修主管（核定與關帳）
* 財務/請款人員（請款報表產出與送出）

---

## 2. 名詞與資料物件（關鍵）

### 2.1 核心物件

* 廠區（Site）
* 年度（Year）
* 合約（Contract）
* 廠區標準工作項目（Site Standard Work Items）
* 合約工作項目單價版本（Contract Work Item Price List：年度＋合約編號＋工作項次）
* 設備（Equipment）
* 設備型式工序（Equipment Process Template）
* 設備工序回報（Equipment Process Report）
* 請款工作項目（Billable Work Items）
* 追加工作項目（Add-on Work Items：二次清洗/廠內維修等）
* 核定（Approval/Acceptance）
* 請款試算（Billing Estimation）
* 關帳（Close Period / Lock）
* 請款報表（Billing Report）

### 2.2 型式工序新增欄位（與吊車/回報整合）

* 吊車噸數（crane_tonnage）：60/80/120…
* 是否回報（need_report）：否者不出現在回報清單
* 是否拍照（need_photo）：否者僅回報、不進入拍照
* 停駐點區域/群組代號（parking_zone_group）：A區/B區/C1…

---

## 3. 角色與旅程地圖（Journey Map）

> 旅程以「年度合約」為起點，以「請款報表送出」為終點。

| 旅程階段 | 主要角色 | 目標 | 主要輸入 | 主要輸出 |
|---|---|---|---|---|
| J1 簽約與單價基準建立 | 業務 | 建立該年度合約唯一單價基準 | 廠區標準工作項目 | 合約工作項目單價版本 |
| J2 設備建檔與計價輪廓 | 專案經理 | 為每台設備建立可請款輪廓 | 合約工作項目單價版本、設備清單 | 設備×工作項目對應（含加成） |
| J3 現場執行與吊車決策輔助 | 現場/主任 | 依停駐點與噸數做派車決策並回報 | 型式工序（含噸數/區域/回報/拍照） | 回報紀錄、照片、狀態（Ready/Expected/Blocked） |
| J4 追加項目與監工核定 | 專案經理/監工 | 納入追加項目並核定可請款內容 | 追加項目、回報/照片 | 核定明細 |
| J5 試算請款與關帳 | 專案經理/監工/請款 | 在送出前完成金額試算與鎖定 | 核定明細、完工回報、單價版本 | 試算結果、關帳狀態 |
| J6 請款報表送出與追溯 | 請款/管理 | 產出可追溯報表並送出 | 已關帳資料 | 請款報表、追溯鏈 |

---

## 4. 核心作業情境（Scenarios）

### SC-01 建立年度合約工作項目單價版本（簽約後）

**目的**：簽約後立即建立「年度＋合約編號」的唯一單價基準，支援後續試算與請款。

**主要角色**：業務

**前置條件**：
* 廠區已存在「標準工作項目」母版（含標準單價/加成規則）
* 合約編號已建立（合約基本資料：年度、客戶、廠區、合約編號）

**主流程**：
1. 業務選擇：年度＋廠區＋合約編號
2. 系統提供「下載廠區標準工作項目」功能（匯出檔案格式 TBD）
3. 業務依合約內容調整單價
4. 業務匯入更新，系統產生並保存「合約工作項目單價版本」
5. 系統完成版本鎖定狀態（可編輯/不可編輯規則 TBD）

**輸出/驗收**：
* 合約工作項目單價版本可被查詢、可被引用於試算
* 版本識別鍵：年度＋合約編號＋工作項次

**例外/規則**：
* 若匯入工作項次重複：處理方式 TBD（覆寫/拒絕/新增版本）

---

### SC-02 試算簽約金額（合約基準建立後）

**目的**：以合約單價版本，快速形成「簽約金額輪廓」，作為管理基準。

**主要角色**：業務 / 專案經理

**前置條件**：
* 已完成 SC-01
* 試算需包含哪些工作項目範圍（設備數、預估數量來源）TBD

**主流程**：
1. 使用者選擇年度＋合約
2. 系統載入合約單價版本
3. 使用者輸入或匯入預估數量（來源 TBD）
4. 系統計算試算金額並產出摘要

**輸出/驗收**：
* 生成「簽約金額試算」記錄，可追溯來源（單價版本＋數量）

---

### SC-03 設備建立請款工作項目對應（建立設備可請款輪廓）

**目的**：專案經理把「設備」與「合約工作項目」對齊，並選用加成（如有）。

**主要角色**：專案經理

**前置條件**：
* 合約工作項目單價版本已存在
* 設備清單已建立或可匯入（匯入格式 TBD）

**主流程**：
1. 專案經理選擇年度＋合約＋廠區
2. 系統顯示合約工作項目清單（含可加成項）
3. 對每台設備建立「標準請款工作項目」對應
4. 若該工作項目可加成，專案經理勾選加成比例/項目
5. 儲存後，系統形成該設備的「可請款輪廓」

**輸出/驗收**：
* 設備 × 工作項目 ×（加成）成為請款試算輸入

---

### SC-04 現場完工回報（依工序控制回報/拍照）

**目的**：依「是否回報/是否拍照」的工序規則，完成現場資料回填，並作為結案與請款依據。

**主要角色**：現場人員

**前置條件**：
* 設備型式工序已定義（含新增欄位）

**主流程**：
1. 現場人員進入回報清單（清單只顯示 need_report=是 的工序）
2. 選擇設備與工序，回報進度/狀態（狀態值 TBD：Ready/Expected/Blocked 是否直接由現場回報）
3. 若 need_photo=是，系統導入拍照流程並上傳
4. 若 need_photo=否，回報完成即結束

**輸出/驗收**：
* 每筆回報需可追溯：人員、時間、設備、工序、狀態、照片（若有）

---

### SC-05 吊車決策輔助：以停駐點區域與噸數彙總「明日可施作量」

**目的**：主任以「停駐點」為起點，快速判斷派車效益與可行性。

**主要角色**：主任 / 現場管理

**前置條件**：
* 工序已填吊車噸數與停駐點區域群組代號
* 工序狀態可用（Ready/Expected/Blocked）

**主流程（看板）**：
1. 系統按「停駐點區域群組」彙總可施作工序數量
2. 區分：Ready（已可做）/ Expected（預期可做）
3. 檢核：吊車噸數與停駐點可停最大噸數（停駐點主檔若存在）
4. 提供建議排序（排序權重 TBD）

**輸出/驗收**：
* 主任能以一頁看板選擇「預定派車」停駐點區域

**例外/規則**：
* 若同一工序對應多停駐點：資料模型與看板呈現 TBD

---

### SC-06 追加工作項目（完工後：二次清洗 / 廠內維修）

**目的**：將非原預期之工作項目納入請款輪廓，並可被核定與試算。

**主要角色**：專案經理

**前置條件**：
* 至少一筆設備完工回報存在

**主流程**：
1. 專案經理選擇設備與原因類型（例如：二次清洗/廠內維修）
2. 從合約工作項目中選擇追加項目，輸入數量與備註
3. 若適用加成，選用加成比例
4. 提交給監工核定

**輸出/驗收**：
* 追加項目成為「待核定」清單

---

### SC-07 監工核定（形成可請款明細）

**目的**：監工對現場回報與追加項目做核定，形成請款試算的正式輸入。

**主要角色**：監工 / 客戶維修主管（視權限）

**前置條件**：
* 回報紀錄/照片與追加項目已存在

**主流程**：
1. 監工檢視設備回報與照片（若需）
2. 核定：同意/退回/要求補件
3. 核定後，系統產生「核定明細」

**輸出/驗收**：
* 核定明細可追溯：核定人、時間、理由、對應回報

---

### SC-08 試算請款 → 關帳 → 送出請款報表

**目的**：在送出前完成試算與鎖定，確保可追溯與不變性。

**主要角色**：專案經理 / 監工 / 請款人員

**前置條件**：
* 核定明細存在
* 完工回報已提交
* 合約單價版本可引用

**主流程**：
1. 系統以核定明細 × 合約單價版本計算試算請款
2. 顯示摘要與明細（格式 TBD）
3. 專案經理送出請款文件
4. 監工/主管確認後執行合約關帳（關帳權限 TBD）
5. 關帳後生成請款報表（可匯出/列印格式 TBD）
6. 請款人員送出報表

**輸出/驗收**：
* 關帳後資料不可被任意修改（請款關帳後不允許更正）

---

## 5. 跨情境的業務規則（需會議確認清單）

1. 合約單價版本的「可編輯/鎖定」時點與權限（TBD）
2. 工序狀態（Ready/Expected/Blocked）的來源：現場回報 vs 系統推算（TBD）
3. 停駐點區域群組代號的治理來源：
   - A) 廠區主檔統一管理
   - B) 工序主檔自填
   - C) 由停駐點主檔反推
   （目前採：工序主檔可記錄，是否需引用停駐點主檔 TBD）
4. 追加工作項目是否允許跨合約項次（TBD）
5. 關帳後更正流程：**不允許更正**
6. PhotoPending 可核定/請款（與拍照流程分線）

---

## 6. 與後續文件的依賴關係（治理版）

* 本文件（Scenario） → 作為 Requirement Decomposition 的唯一情境來源
* Requirement Decomposition → 才能產出 PRD（避免功能清單失焦）
* PRD → 才能產出 System Design / API Spec

> 若後續文件出現與本文件情境不一致之流程或欄位，應視為「需求偏移」，必須回到本文件修訂後再前進。

---

## 7. 下一步建議（落地導向）

1. 以本文件進行一次「需求確認會」：逐條確認第 5 節 TBD 規則
2. 產出下一份文件：Requirement Decomposition（把情境拆成功能與驗收條件）
3. 同步啟動資料模型草稿（僅列核心表與鍵，不進入實作細節）

